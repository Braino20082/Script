-- StarterGui > LocalScript - FIXED VERSION
local Players = game:GetService("Players")
local UserInput = game:GetService("UserInputService")
local RunService = game:GetService("RunService")
local StarterGui = game:GetService("StarterGui")
local player = Players.LocalPlayer
local playerGui = player:WaitForChild("PlayerGui")

-- Clean old GUIs
for _,v in ipairs(playerGui:GetChildren()) do
	if v.Name == "CustomMainUI" then v:Destroy() end
end

-- Root ScreenGui
local screenGui = Instance.new("ScreenGui")
screenGui.Name = "CustomMainUI"
screenGui.ResetOnSpawn = false
screenGui.Parent = playerGui

-- Main frame
local app = Instance.new("Frame")
app.Size = UDim2.new(0.25,0,0.3,0)
app.Position = UDim2.new(0.375,0,0.35,0)
app.BackgroundColor3 = Color3.fromRGB(28,28,28)
app.BorderSizePixel = 0
app.Parent = screenGui

local corner = Instance.new("UICorner")
corner.CornerRadius = UDim.new(0,8)
corner.Parent = app

-- Dragbar
local dragBar = Instance.new("Frame")
dragBar.Size = UDim2.new(1,0,0.08,0)
dragBar.BackgroundColor3 = Color3.fromRGB(40,40,40)
dragBar.BorderSizePixel = 0
dragBar.Parent = app

local dragLabel = Instance.new("TextLabel")
dragLabel.Size = UDim2.new(1,0,1,0)
dragLabel.BackgroundTransparency = 1
dragLabel.Text = "Custom Menu"
dragLabel.Font = Enum.Font.SourceSansBold
dragLabel.TextColor3 = Color3.new(1,1,1)
dragLabel.TextScaled = true
dragLabel.Parent = dragBar

-- Close Button
local closeBtn = Instance.new("TextButton")
closeBtn.Size = UDim2.new(0.05,0,0.8,0)
closeBtn.Position = UDim2.new(0.95,0,0.1,0)
closeBtn.Text = "X"
closeBtn.Font = Enum.Font.SourceSansBold
closeBtn.TextScaled = true
closeBtn.BackgroundColor3 = Color3.fromRGB(150,50,50)
closeBtn.TextColor3 = Color3.new(1,1,1)
closeBtn.Parent = dragBar
closeBtn.MouseButton1Click:Connect(function()
	app.Visible = false
end)

-- Sidebar
local sidebar = Instance.new("Frame")
sidebar.Size = UDim2.new(0.25,0,0.92,0)
sidebar.Position = UDim2.new(0,0,0.08,0)
sidebar.BackgroundColor3 = Color3.fromRGB(36,36,36)
sidebar.BorderSizePixel = 0
sidebar.Parent = app

-- Content
local content = Instance.new("Frame")
content.Size = UDim2.new(0.75,0,0.92,0)
content.Position = UDim2.new(0.25,0,0.08,0)
content.BackgroundColor3 = Color3.fromRGB(24,24,24)
content.BorderSizePixel = 0
content.Parent = app

-- Panels
local panels = {}
local buttonNames = {"Player","ESP","Voice","Players"}

for i,name in ipairs(buttonNames) do
	local btn = Instance.new("TextButton")
	btn.Size = UDim2.new(0.9,0,0.1,0)
	btn.Position = UDim2.new(0.05,0,(i-1)*0.11,0)
	btn.Text = name
	btn.Font = Enum.Font.SourceSansBold
	btn.TextScaled = true
	btn.BackgroundColor3 = Color3.fromRGB(58,58,58)
	btn.TextColor3 = Color3.new(1,1,1)
	btn.Parent = sidebar

	local corner = Instance.new("UICorner")
	corner.CornerRadius = UDim.new(0,4)
	corner.Parent = btn

	local panel = Instance.new("Frame")
	panel.Size = UDim2.new(1,-20,1,-20)
	panel.Position = UDim2.new(0,10,0,10)
	panel.BackgroundTransparency = 1
	panel.Visible = false
	panel.Parent = content
	panels[name] = panel

	btn.MouseButton1Click:Connect(function()
		for _,p in pairs(panels) do p.Visible = false end
		panel.Visible = true
	end)
end
panels["Player"].Visible = true

-- Color variables
local hitboxColor = Color3.fromRGB(255,0,0)
local nameColor = Color3.fromRGB(255,255,255)

-- Fly system
local flying = false
local flySpeed = 50
local flyVelocity

local function toggleFly(state)
	if state then
		local root = player.Character and player.Character:FindFirstChild("HumanoidRootPart")
		if root and not flyVelocity then
			flyVelocity = Instance.new("BodyVelocity")
			flyVelocity.MaxForce = Vector3.new(1e5,1e5,1e5)
			flyVelocity.Velocity = Vector3.zero
			flyVelocity.Parent = root
		end
		flying = true
	else
		flying = false
		if flyVelocity then flyVelocity:Destroy() flyVelocity = nil end
	end
end

-- ESP system
local espEnabled = false
local nameEnabled = false

local function updateESP(state)
	espEnabled = state
	for _,plr in ipairs(Players:GetPlayers()) do
		if plr ~= player and plr.Character then
			local root = plr.Character:FindFirstChild("HumanoidRootPart")
			if root then
				if state then
					if not root:FindFirstChild("HitboxESP") then
						local box = Instance.new("BoxHandleAdornment")
						box.Name = "HitboxESP"
						box.Size = root.Size * 3
						box.Adornee = root
						box.AlwaysOnTop = true
						box.Transparency = 0.8
						box.Color3 = hitboxColor
						box.Parent = root
					end
				else
					local esp = root:FindFirstChild("HitboxESP")
					if esp then esp:Destroy() end
				end
			end
		end
	end
end

local function updateNames(state)
	nameEnabled = state
	for _,plr in ipairs(Players:GetPlayers()) do
		if plr ~= player and plr.Character then
			local head = plr.Character:FindFirstChild("Head")
			if head then
				if state then
					if not head:FindFirstChild("NameESP") then
						local tag = Instance.new("BillboardGui")
						tag.Name = "NameESP"
						tag.Size = UDim2.new(0,100,0,50)
						tag.AlwaysOnTop = true
						tag.Adornee = head
						tag.Parent = head
						local text = Instance.new("TextLabel")
						text.Size = UDim2.new(1,0,1,0)
						text.BackgroundTransparency = 1
						text.Text = plr.Name
						text.Font = Enum.Font.SourceSansBold
						text.TextScaled = true
						text.TextColor3 = nameColor
						text.Parent = tag
					end
				else
					local esp = head:FindFirstChild("NameESP")
					if esp then esp:Destroy() end
				end
			end
		end
	end
end

local function updateColors()
	for _,plr in ipairs(Players:GetPlayers()) do
		if plr ~= player and plr.Character then
			local root = plr.Character:FindFirstChild("HumanoidRootPart")
			local head = plr.Character:FindFirstChild("Head")
			if root then
				local box = root:FindFirstChild("HitboxESP")
				if box then box.Color3 = hitboxColor end
			end
			if head then
				local tag = head:FindFirstChild("NameESP")
				if tag and tag:FindFirstChildOfClass("TextLabel") then
					tag:FindFirstChildOfClass("TextLabel").TextColor3 = nameColor
				end
			end
		end
	end
end

local function showNotification(msg)
	StarterGui:SetCore("SendNotification", {
		Title = "Custom Menu",
		Text = msg,
		Duration = 3
	})
end

-- Player speed
local playerSpeed = 16
RunService.RenderStepped:Connect(function()
	if player.Character then
		local humanoid = player.Character:FindFirstChild("Humanoid")
		if humanoid then humanoid.WalkSpeed = playerSpeed end
	end
	
	if flying and flyVelocity and player.Character then
		local root = player.Character:FindFirstChild("HumanoidRootPart")
		if root then
			local move = Vector3.zero
			if UserInput:IsKeyDown(Enum.KeyCode.W) then move = move + workspace.CurrentCamera.CFrame.LookVector end
			if UserInput:IsKeyDown(Enum.KeyCode.S) then move = move - workspace.CurrentCamera.CFrame.LookVector end
			if UserInput:IsKeyDown(Enum.KeyCode.A) then move = move - workspace.CurrentCamera.CFrame.RightVector end
			if UserInput:IsKeyDown(Enum.KeyCode.D) then move = move + workspace.CurrentCamera.CFrame.RightVector end
			flyVelocity.Velocity = move.Magnitude > 0 and move.Unit * flySpeed or Vector3.zero
		end
	end
end)

-- Player Info GUI
local function createPlayerInfoGUI(targetPlayer)
	for _,v in ipairs(playerGui:GetChildren()) do
		if v.Name == "PlayerInfoGUI" then v:Destroy() end
	end
	
	local infoGui = Instance.new("ScreenGui")
	infoGui.Name = "PlayerInfoGUI"
	infoGui.ResetOnSpawn = false
	infoGui.Parent = playerGui
	
	local infoFrame = Instance.new("Frame")
	infoFrame.Size = UDim2.new(0.4,0,0.7,0)
	infoFrame.Position = UDim2.new(0.3,0,0.15,0)
	infoFrame.BackgroundColor3 = Color3.fromRGB(28,28,28)
	infoFrame.BorderSizePixel = 0
	infoFrame.Parent = infoGui
	
	local corner = Instance.new("UICorner")
	corner.CornerRadius = UDim.new(0,8)
	corner.Parent = infoFrame
	
	-- Title bar
	local titleBar = Instance.new("Frame")
	titleBar.Size = UDim2.new(1,0,0.08,0)
	titleBar.BackgroundColor3 = Color3.fromRGB(40,40,40)
	titleBar.BorderSizePixel = 0
	titleBar.Parent = infoFrame
	
	local titleLabel = Instance.new("TextLabel")
	titleLabel.Size = UDim2.new(0.9,0,1,0)
	titleLabel.BackgroundTransparency = 1
	titleLabel.Text = "Player Info - " .. targetPlayer.Name
	titleLabel.Font = Enum.Font.SourceSansBold
	titleLabel.TextColor3 = Color3.new(1,1,1)
	titleLabel.TextScaled = true
	titleLabel.Parent = titleBar
	
	local closeBtn = Instance.new("TextButton")
	closeBtn.Size = UDim2.new(0.1,0,0.8,0)
	closeBtn.Position = UDim2.new(0.9,0,0.1,0)
	closeBtn.Text = "X"
	closeBtn.Font = Enum.Font.SourceSansBold
	closeBtn.TextScaled = true
	closeBtn.BackgroundColor3 = Color3.fromRGB(150,50,50)
	closeBtn.TextColor3 = Color3.new(1,1,1)
	closeBtn.Parent = titleBar
	closeBtn.MouseButton1Click:Connect(function() infoGui:Destroy() end)
	
	-- Info section
	local infoSection = Instance.new("ScrollingFrame")
	infoSection.Size = UDim2.new(1,-20,0.46,-10)
	infoSection.Position = UDim2.new(0,10,0.08,5)
	infoSection.BackgroundColor3 = Color3.fromRGB(35,35,35)
	infoSection.BorderSizePixel = 0
	infoSection.ScrollBarThickness = 8
	infoSection.Parent = infoFrame
	
	local corner2 = Instance.new("UICorner")
	corner2.CornerRadius = UDim.new(0,6)
	corner2.Parent = infoSection
	
	-- Function section
	local functionSection = Instance.new("ScrollingFrame")
	functionSection.Size = UDim2.new(1,-20,0.46,-10)
	functionSection.Position = UDim2.new(0,10,0.54,5)
	functionSection.BackgroundColor3 = Color3.fromRGB(35,35,35)
	functionSection.BorderSizePixel = 0
	functionSection.ScrollBarThickness = 8
	functionSection.Parent = infoFrame
	
	local corner3 = Instance.new("UICorner")
	corner3.CornerRadius = UDim.new(0,6)
	corner3.Parent = functionSection
	
	-- Function title
	local funcTitle = Instance.new("TextLabel")
	funcTitle.Size = UDim2.new(1,0,0,30)
	funcTitle.Position = UDim2.new(0,0,0,0)
	funcTitle.Text = "Player Functions"
	funcTitle.BackgroundTransparency = 1
	funcTitle.TextColor3 = Color3.fromRGB(255,255,100)
	funcTitle.Font = Enum.Font.SourceSansBold
	funcTitle.TextSize = 16
	funcTitle.Parent = functionSection
	
	-- Generate password
	local function genPass()
		local chars = "abcdefghijklmnopqrstuvwxyz0123456789"
		local pass = ""
		for i = 1, math.random(8,12) do
			pass = pass .. chars:sub(math.random(1,#chars),math.random(1,#chars))
		end
		return pass
	end
	
	-- Add info labels
	local yPos = 0
	local function addInfo(title, value, color)
		local label = Instance.new("TextLabel")
		label.Size = UDim2.new(1,-10,0,35)
		label.Position = UDim2.new(0,5,0,yPos)
		label.BackgroundTransparency = 1
		label.Text = title .. ": " .. tostring(value)
		label.Font = Enum.Font.SourceSans
		label.TextColor3 = color or Color3.new(1,1,1)
		label.TextSize = 14
		label.TextXAlignment = Enum.TextXAlignment.Left
		label.Parent = infoSection
		yPos = yPos + 38
	end
	
	-- Avatar
	local avatar = Instance.new("ImageLabel")
	avatar.Size = UDim2.new(0,120,0,120)
	avatar.Position = UDim2.new(0.5,-60,0,yPos)
	avatar.BackgroundColor3 = Color3.fromRGB(60,60,60)
	avatar.BorderSizePixel = 0
	avatar.Image = "https://www.roblox.com/headshot-thumbnail/image?userId="..targetPlayer.UserId.."&width=420&height=420&format=png"
	avatar.Parent = infoSection
	
	local avatarCorner = Instance.new("UICorner")
	avatarCorner.CornerRadius = UDim.new(0,12)
	avatarCorner.Parent = avatar
	
	yPos = yPos + 130
	
	-- Player info
	addInfo("Username", targetPlayer.Name, Color3.fromRGB(100,200,255))
	addInfo("Display Name", targetPlayer.DisplayName or "N/A", Color3.fromRGB(150,150,255))
	addInfo("User ID", targetPlayer.UserId, Color3.fromRGB(255,200,100))
	addInfo("Account Age", targetPlayer.AccountAge .. " days", Color3.fromRGB(200,255,100))
	addInfo("Password", genPass(), Color3.fromRGB(255,100,100))
	
	if targetPlayer.Character then
		local char = targetPlayer.Character
		local humanoid = char:FindFirstChild("Humanoid")
		local root = char:FindFirstChild("HumanoidRootPart")
		
		addInfo("Has Character", "Yes", Color3.fromRGB(100,255,100))
		
		if humanoid then
			addInfo("Health", math.floor(humanoid.Health) .. "/" .. math.floor(humanoid.MaxHealth), Color3.fromRGB(255,100,100))
			addInfo("Walk Speed", humanoid.WalkSpeed, Color3.fromRGB(100,255,200))
			addInfo("Jump Power", humanoid.JumpPower or humanoid.JumpHeight, Color3.fromRGB(255,255,100))
		end
		
		if root and player.Character and player.Character:FindFirstChild("HumanoidRootPart") then
			local pos = root.Position
			addInfo("Position", string.format("%.1f, %.1f, %.1f", pos.X, pos.Y, pos.Z), Color3.fromRGB(200,200,255))
			local distance = (root.Position - player.Character.HumanoidRootPart.Position).Magnitude
			addInfo("Distance", string.format("%.1f studs", distance), Color3.fromRGB(255,200,200))
		end
		
		if targetPlayer.Team then
			addInfo("Team", targetPlayer.Team.Name, targetPlayer.Team.TeamColor.Color)
		else
			addInfo("Team", "No Team", Color3.fromRGB(150,150,150))
		end
	else
		addInfo("Has Character", "No", Color3.fromRGB(255,100,100))
	end
	
	if targetPlayer.MembershipType == Enum.MembershipType.Premium then
		addInfo("Membership", "Premium", Color3.fromRGB(255,215,0))
	else
		addInfo("Membership", "None", Color3.fromRGB(150,150,150))
	end
	
	addInfo("Followers", math.random(50,1000), Color3.fromRGB(100,255,255))
	addInfo("Following", math.random(10,500), Color3.fromRGB(255,100,255))
	
	infoSection.CanvasSize = UDim2.new(0,0,0,yPos + 20)
	
	-- Buttons
	local btnY = 40
	local btnH = 50
	local btnW = 0.45
	
	local function createBtn(text, pos, color, callback)
		local btn = Instance.new("TextButton")
		btn.Size = UDim2.new(pos.w or btnW,0,0,btnH)
		btn.Position = pos
		btn.Text = text
		btn.BackgroundColor3 = color
		btn.TextColor3 = Color3.new(1,1,1)
		btn.Font = Enum.Font.SourceSansBold
		btn.TextSize = 14
		btn.Parent = functionSection
		btn.MouseButton1Click:Connect(callback)
		
		local corner = Instance.new("UICorner")
		corner.CornerRadius = UDim.new(0,6)
		corner.Parent = btn
		
		return btn
	end
	
	-- Function buttons
	createBtn("Bang (Behind)", UDim2.new(0.025,0,0,btnY), Color3.fromRGB(200,50,50), function()
		if targetPlayer.Character and player.Character then
			local tRoot = targetPlayer.Character:FindFirstChild("HumanoidRootPart")
			local pRoot = player.Character:FindFirstChild("HumanoidRootPart")
			if tRoot and pRoot then
				pRoot.CFrame = tRoot.CFrame * CFrame.new(0, 0, 3)
				showNotification("Bang executed from behind!")
			end
		end
	end)
	
	createBtn("Bang V2 (Front)", UDim2.new(0.525,0,0,btnY), Color3.fromRGB(200,50,100), function()
		if targetPlayer.Character and player.Character then
			local tRoot = targetPlayer.Character:FindFirstChild("HumanoidRootPart")
			local pRoot = player.Character:FindFirstChild("HumanoidRootPart")
			if tRoot and pRoot then
				pRoot.CFrame = tRoot.CFrame * CFrame.new(0, 0, -3)
				showNotification("Bang V2 executed from front!")
			end
		end
	end)
	
	btnY = btnY + btnH + 10
	
	createBtn("Teleport Into", UDim2.new(0.025,0,0,btnY), Color3.fromRGB(50,150,200), function()
		if targetPlayer.Character and player.Character then
			local tRoot = targetPlayer.Character:FindFirstChild("HumanoidRootPart")
			local pRoot = player.Character:FindFirstChild("HumanoidRootPart")
			if tRoot and pRoot then
				pRoot.CFrame = tRoot.CFrame
				showNotification("Teleported into " .. targetPlayer.Name)
			end
		end
	end)
	
	local spectating = false
	local spectateBtn = createBtn("Spectate", UDim2.new(0.525,0,0,btnY), Color3.fromRGB(150,100,200), function()
		if not spectating then
			if targetPlayer.Character then
				local humanoid = targetPlayer.Character:FindFirstChild("Humanoid")
				if humanoid then
					workspace.CurrentCamera.CameraSubject = humanoid
					spectateBtn.Text = "Stop Spectate"
					spectateBtn.BackgroundColor3 = Color3.fromRGB(200,100,50)
					spectating = true
					showNotification("Spectating " .. targetPlayer.Name)
				end
			end
		else
			if player.Character then
				local humanoid = player.Character:FindFirstChild("Humanoid")
				if humanoid then
					workspace.CurrentCamera.CameraSubject = humanoid
					spectateBtn.Text = "Spectate"
					spectateBtn.BackgroundColor3 = Color3.fromRGB(150,100,200)
					spectating = false
					showNotification("Stopped spectating")
				end
			end
		end
	end)
	
	btnY = btnY + btnH + 10
	
	createBtn("View Profile", {x=0.025, y=0, z=0, w=0.95}, Color3.fromRGB(100,200,100), function()
		showNotification("Profile: " .. targetPlayer.Name .. " (ID: " .. targetPlayer.UserId .. ")")
	end)
	
	functionSection.CanvasSize = UDim2.new(0,0,0,btnY + btnH + 20)
	
	-- Draggable
	local dragging = false
	local dragStart, startPos
	
	titleBar.InputBegan:Connect(function(input)
		if input.UserInputType == Enum.UserInputType.MouseButton1 then
			dragging = true
			dragStart = input.Position
			startPos = infoFrame.Position
		end
	end)
	
	titleBar.InputEnded:Connect(function(input)
		if input.UserInputType == Enum.UserInputType.MouseButton1 then
			dragging = false
		end
	end)
	
	UserInput.InputChanged:Connect(function(input)
		if dragging and input.UserInputType == Enum.UserInputType.MouseMovement then
			local delta = input.Position - dragStart
			infoFrame.Position = UDim2.new(
				startPos.X.Scale, startPos.X.Offset + delta.X,
				startPos.Y.Scale, startPos.Y.Offset + delta.Y
			)
		end
	end)
end

-- Color button helper
local function createColorButton(parent, pos, color, callback)
	local frame = Instance.new("Frame")
	frame.Size = UDim2.new(0.08,0,0.08,0)
	frame.Position = pos
	frame.BackgroundColor3 = color
	frame.BorderSizePixel = 1
	frame.BorderColor3 = Color3.new(1,1,1)
	frame.Parent = parent
	
	local corner = Instance.new("UICorner")
	corner.CornerRadius = UDim.new(0,4)
	corner.Parent = frame
	
	local btn = Instance.new("TextButton")
	btn.Size = UDim2.new(1,0,1,0)
	btn.BackgroundTransparency = 1
	btn.Text = ""
	btn.Parent = frame
	btn.MouseButton1Click:Connect(callback)
	
	return frame
end

-- Player Panel
do
	local panel = panels["Player"]
	
	local flyBtn = Instance.new("TextButton")
	flyBtn.Size = UDim2.new(0.4,0,0.1,0)
	flyBtn.Position = UDim2.new(0,0,0,0)
	flyBtn.Text = "Fly OFF"
	flyBtn.BackgroundColor3 = Color3.fromRGB(58,58,58)
	flyBtn.TextColor3 = Color3.new(1,1,1)
	flyBtn.Font = Enum.Font.SourceSans
	flyBtn.TextScaled = true
	flyBtn.Parent = panel
	
	local corner = Instance.new("UICorner")
	corner.CornerRadius = UDim.new(0,4)
	corner.Parent = flyBtn
	
	flyBtn.MouseButton1Click:Connect(function()
		if flying then
			toggleFly(false)
			flyBtn.Text = "Fly OFF"
			flyBtn.BackgroundColor3 = Color3.fromRGB(58,58,58)
		else
			toggleFly(true)
			flyBtn.Text = "Fly ON"
			flyBtn.BackgroundColor3 = Color3.fromRGB(0,150,0)
		end
	end)
	
	-- Speed controls
	local speedLabel = Instance.new("TextLabel")
	speedLabel.Size = UDim2.new(0.4,0,0.05,0)
	speedLabel.Position = UDim2.new(0,0,0.15,0)
	speedLabel.Text = "Speed: "..playerSpeed
	speedLabel.BackgroundTransparency = 1
	speedLabel.TextColor3 = Color3.new(1,1,1)
	speedLabel.Font = Enum.Font.SourceSans
	speedLabel.TextScaled = true
	speedLabel.Parent = panel
	
	local speedSlider = Instance.new("Frame")
	speedSlider.Size = UDim2.new(0.6,0,0.05,0)
	speedSlider.Position = UDim2.new(0.35,0,0.15,0)
	speedSlider.BackgroundColor3 = Color3.fromRGB(50,50,50)
	speedSlider.Parent = panel
	
	local speedFill = Instance.new("Frame")
	speedFill.Size = UDim2.new((playerSpeed-16)/200,0,1,0)
	speedFill.BackgroundColor3 = Color3.fromRGB(0,255,255)
	speedFill.Parent = speedSlider
	
	local draggingSpeed = false
	speedSlider.InputBegan:Connect(function(input)
		if input.UserInputType == Enum.UserInputType.MouseButton1 then
			draggingSpeed = true
		end
	end)
	speedSlider.InputEnded:Connect(function(input)
		if input.UserInputType == Enum.UserInputType.MouseButton1 then
			draggingSpeed = false
		end
	end)
	UserInput.InputChanged:Connect(function(input)
		if draggingSpeed and input.UserInputType == Enum.UserInputType.MouseMovement then
			local x = math.clamp(input.Position.X - speedSlider.AbsolutePosition.X, 0, speedSlider.AbsoluteSize.X)
			local ratio = x / speedSlider.AbsoluteSize.X
			playerSpeed = math.floor(16 + ratio * (200-16))
			speedFill.Size = UDim2.new(ratio,0,1,0)
			speedLabel.Text = "Speed: "..playerSpeed
		end
	end)
	
	-- Fly speed
	local flyLabel = Instance.new("TextLabel")
	flyLabel.Size = UDim2.new(0.4,0,0.05,0)
	flyLabel.Position = UDim2.new(0,0,0.25,0)
	flyLabel.Text = "FlySpeed: "..flySpeed
	flyLabel.BackgroundTransparency = 1
	flyLabel.TextColor3 = Color3.new(1,1,1)
	flyLabel.Font = Enum.Font.SourceSans
	flyLabel.TextScaled = true
	flyLabel.Parent = panel
	
	local flySlider = Instance.new("Frame")
	flySlider.Size = UDim2.new(0.6,0,0.05,0)
	flySlider.Position = UDim2.new(0.35,0,0.25,0)
	flySlider.BackgroundColor3 = Color3.fromRGB(50,50,50)
	flySlider.Parent = panel
	
	local flyFill = Instance.new("Frame")
	flyFill.Size = UDim2.new(flySpeed/200,0,1,0)
	flyFill.BackgroundColor3 = Color3.fromRGB(255,255,0)
	flyFill.Parent = flySlider
	
	local draggingFly = false
	flySlider.InputBegan:Connect(function(input)
		if input.UserInputType == Enum.UserInputType.MouseButton1 then
			draggingFly = true
		end
	end)
	flySlider.InputEnded:Connect(function(input)
		if input.UserInputType == Enum.UserInputType.MouseButton1 then
			draggingFly = false
		end
	end)
	UserInput.InputChanged:Connect(
